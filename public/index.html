<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Flight Saver AI | AI-Powered Price Tracking</title>
    <link rel="stylesheet" href="styles.css">

    <link rel="icon" href="images/favicon.png" type="image/x-icon">

    <!-- Add Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-functions-compat.js"></script>

    <!-- Initialize Firebase -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAnRoxpkuHfsBOGEp4ycfWaR6DteXWJwc0",
            authDomain: "flightsaver-bffd8.firebaseapp.com",
            projectId: "flightsaver-bffd8",
            databaseURL: "https://flightsaver-bffd8-default-rtdb.firebaseio.com",
            storageBucket: "flightsaver-bffd8.firebasestorage.app",
            messagingSenderId: "902701957858",
            appId: "1:902701957858:web:8c2f1c572d3deae12f54bb"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);

        // Initialize Realtime Database and Functions
        const db = firebase.database(app);
        const functions = firebase.functions(app);
        console.log(db);
        console.log(functions);
    </script>

    <script src="https://js.stripe.com/v3/"></script>
</head>
<body id="top">

    <!-- Navbar -->
    <div class="navbar">
        <div class="logo">
            <a href="#top">
              <img src="images/plane-dollar.png" alt="Flight Saver AI Logo">
              Flight Saver AI
            </a>
        </div>
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="menu">
            <a href="#features">Features</a>
            <a href="#pricing">Pricing</a>
            <a href="#how-it-works">How It Works</a>
            <a href="#testimonials">Reviews</a>
            <a href="#signup" class="nav-cta">Get Started</a>
        </div>
    </div>

    <!-- Hero Section -->
    <div class="hero">
        <h1>AI-Powered Price Tracking.<br>Never Overpay For A Flight Again.</h1>
        <p>Track booked flights and get notified when prices drop. Save money on your next trip with Flight Saver AI.</p>
        <a href="#pricing" class="cta-button">Start Saving - From $5/mo</a>
    </div>

    <!-- Savings Stats Section -->
    <div class="stats">
        <div class="stat-box animate-on-scroll">
            <h3>$12.5K+</h3>
            <p>Total Customer Savings</p>
        </div>
        <div class="stat-box animate-on-scroll">
            <h3>32%</h3>
            <p>Average Price Drop Found</p>
        </div>
        <div class="stat-box animate-on-scroll">
            <h3>50K+</h3>
            <p>Flights Monitored</p>
        </div>
    </div>

    <!-- Trusted By Section -->
    <div class="trusted">
        <p>‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ Compatible with major airlines</p>
        <div class="logo-container">
            <img src="images/sw-logo.png" alt="Southwest Airlines">
            <!-- <img src="images/united-logo.png" alt="United Airlines">  -->
            <img src="images/delta-logo.png" alt="Delta Airlines">
            <!-- <img src="images/american-logo.png" alt="American Airlines"> -->
            <img src="images/jetblue-logo.png" alt="JetBlue">
        </div>
    </div>

    <!-- Features Section -->
    <div id="features" class="features">
        <h2>üöÄ Key Features</h2>
        <div class="feature-box animate-on-scroll">
            <h3>‚úàÔ∏è Smart Price Tracking</h3>
            <p>Continuous monitoring of your booked flight prices with real-time updates.</p>
        </div>
        <div class="feature-box animate-on-scroll">
            <h3>üîî Instant Notifications</h3>
            <p>Get alerts via email or SMS when prices drop below your purchase price.</p>
        </div>
        <div class="feature-box animate-on-scroll">
            <h3>üí∞ Savings Calculator</h3>
            <p>AI-powered analysis of potential savings and rebooking recommendations.</p>
        </div>
    </div>

    <!-- How It Works Section -->
    <div id="how-it-works" class="visual">
        <h2>üìå How Flight Saver AI Works</h2>
        <p class="section-intro">Save money on flights in 3 simple steps:</p>
        
        <div class="steps-container">
            <div class="step-box animate-on-scroll">
                <div class="step-number">1</div>
                <h3>Add Your Flight</h3>
                <p>Enter your flight details or forward your confirmation email. We'll start tracking prices instantly.</p>
            </div>
            
            <div class="step-box animate-on-scroll">
                <div class="step-number">2</div>
                <h3>We Monitor 24/7</h3>
                <p>Our AI continuously checks for price drops across all major airlines and booking platforms.</p>
            </div>
            
            <div class="step-box animate-on-scroll">
                <div class="step-number">3</div>
                <h3>Save Money</h3>
                <p>Get instant notifications when prices drop. We'll guide you through the rebooking process to claim your savings.</p>
            </div>
        </div>

        <div class="process-highlight">
            <div class="highlight-box animate-on-scroll">
                <h4>üîç Smart Detection</h4>
                <p>Our AI checks prices every 30 minutes</p>
            </div>
            <div class="highlight-box animate-on-scroll">
                <h4>üí∞ Average Savings</h4>
                <p>Users save $175 per flight</p>
            </div>
            <div class="highlight-box animate-on-scroll">
                <h4>‚ö° Fast Alerts</h4>
                <p>Get notified within seconds of a price drop</p>
            </div>
        </div>
    </div>

    <!-- Testimonials Section -->
    <div id="testimonials" class="testimonials">
        <h2>üåü What Our Users Say</h2>
        <p class="testimonial">"Saved $300 on my last flight to Europe!" - Frequent Flyer</p>
        <p class="testimonial">"The easiest way to track flight prices and save money." - Business Traveler</p>
    </div>

    <!-- Signup Section -->
    <div id="signup" class="signup">
        <h2>Join Flight Saver AI</h2>
        <div id="waitlistContainer">
            <form id="waitlistForm" class="waitlist-form">
                <input type="email" name="email" placeholder="Enter your email" required>
                <button type="submit">Join the Waitlist</button>
            </form>
            <p>Thanks for joining the waitlist! We'll let you know when you can subscribe to FlightSaver.</p>
        </div>
    </div>

    <!-- Pricing Comparison -->
    <div class="pricing">
        <h2>üí∞ Real Savings Example</h2>
        <div class="price-comparison">
            <div class="price-box original animate-on-scroll">
                <h3>Original Price</h3>
                <p class="price">$850</p>
                <p class="route">NYC ‚Üí LONDON</p>
            </div>
            <div class="price-box savings animate-on-scroll">
                <h3>After Price Drop</h3>
                <p class="price">$592</p>
                <p class="savings-amount">You Save: $258</p>
            </div>
        </div>
    </div>

    <!-- Pricing Plans -->
    <div id="pricing" class="pricing-plans">
        <h2>üéØ Choose Your Plan</h2>
        <div class="plans-container">
            <div class="plan-box animate-on-scroll">
                <div class="plan-header">
                    <h3>Basic</h3>
                    <p class="price">$5<span>/month</span></p>
                </div>
                <ul class="plan-features">
                    <li>‚úì Monitor 2 flights at once</li>
                    <li>‚úì Email notifications</li>
                    <li>‚úì Basic savings reports</li>
                    <li>‚úì 24/7 price tracking</li>
                    <li>‚úì Savings Guarantee*</li>
                </ul>
                <a id="buy-button" class="plan-cta">Get Started</a>
            </div>
            <div class="plan-box popular animate-on-scroll">
                <div class="popular-tag">Most Popular</div>
                <div class="plan-header">
                    <h3>Pro</h3>
                    <p class="price">$12<span>/month</span></p>
                </div>
                <ul class="plan-features">
                    <li>‚úì Monitor 10 flights at once</li>
                    <li>‚úì Email + SMS notifications</li>
                    <li>‚úì Detailed savings analytics</li>
                    <li>‚úì Priority price checks</li>
                    <li>‚úì Companion fare tracking</li>
                    <li>‚úì Savings Guarantee*</li>
                </ul>
                <a href="#signup" class="plan-cta">Get Started</a>
            </div>
            <div class="plan-box animate-on-scroll">
                <div class="plan-header">
                    <h3>Business</h3>
                    <p class="price">$29<span>/month</span></p>
                </div>
                <ul class="plan-features">
                    <li>‚úì Unlimited flight monitoring</li>
                    <li>‚úì Team collaboration</li>
                    <li>‚úì Custom integrations</li>
                    <li>‚úì Dedicated support</li>
                    <li>‚úì Savings Guarantee*</li>
                </ul>
                <a href="#signup" class="plan-cta">Get Started</a>
            </div>
        </div>
        <p class="savings-guarantee">*Savings Guarantee: If we don't save you the cost of your subscription, we'll refund the difference.</p>
    </div>

    <!-- FAQ Section -->
    <div class="faq">
        <h2>‚ùì Frequently Asked Questions</h2>
        <div class="faq-grid">
            <div class="faq-item animate-on-scroll">
                <h3>How does it work?</h3>
                <p>Simply enter your flight details and we'll monitor prices 24/7. When we detect a price drop, you'll receive an instant notification with rebooking instructions.</p>
            </div>
            <div class="faq-item animate-on-scroll">
                <h3>Which airlines are supported?</h3>
                <p>We support all major US airlines that offer free cancellation or credit for price drops, including Southwest, Delta, and JetBlue.</p>
            </div>
            <div class="faq-item animate-on-scroll">
                <h3>Is there a fee?</h3>
                <p>Plans start at just $5/month. We offer different tiers based on how many flights you want to track simultaneously. Choose the plan that best fits your travel needs!</p>
            </div>
            <div class="faq-item animate-on-scroll">
                <h3>How do I get my savings?</h3>
                <p>When we find a lower price, we guide you through the simple process of rebooking or claiming airline credit for the difference.</p>
            </div>
        </div>
    </div>
    <div id="checkout-container">
      <div style="background-color: white; width: 100%; max-width: 500px; padding: 5px; max-height: 98%;">
        <div id="close-container">
          <div id="close-button" class="active">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        <div id="checkout"></div>
      </div>

    </div>
    <script>
        const hamburger = document.querySelector('.hamburger');
        const menu = document.querySelector('.menu');
        const navbar = document.querySelector('.navbar');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            menu.classList.toggle('active');
        });

        // Close menu when clicking a link
        document.querySelectorAll('.menu a').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                menu.classList.remove('active');
            });
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!navbar.contains(e.target)) {
                hamburger.classList.remove('active');
                menu.classList.remove('active');
            }
        });

        // Simplified animation code
        const observerOptions = {
            threshold: 0.2
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        // Observe all elements with animate-on-scroll class
        document.querySelectorAll('.animate-on-scroll').forEach(element => {
            observer.observe(element);
        });

        document.getElementById('waitlistForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = e.target.email.value;
            const button = e.target.querySelector('button');
            const originalText = button.textContent;
            
            try {
                button.textContent = 'Joining...';
                button.disabled = true;

                // Save to Realtime Database under /emails/
                await db.ref('emails').push({
                    email: email,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });

                // Hide the form and show the success message
                document.querySelector('.signup form').style.display = 'none';
                document.querySelector('.signup p').style.display = 'block';
                e.target.reset();
            } catch (error) {
                console.error('Error:', error);
                alert('Something went wrong. Please try again.');
            } finally {
                button.textContent = originalText;
                button.disabled = false;
            }
        });

        const stripe = Stripe('pk_test_d4MYd46KSDTe0quWY4eC3v6E00GC20skyY'); // Replace with your Stripe publishable key
        let checkout = null;
        document.getElementById('buy-button').addEventListener('click', async () => {
            try {
              if (!checkout) {
                  const createCheckoutSession = functions.httpsCallable('createCheckoutSession');
                  const result = await createCheckoutSession();
                  const clientSecret = result.data.clientSecret;
                  checkout = await stripe.initEmbeddedCheckout({ clientSecret });
                  checkout.mount('#checkout');
                }
                document.getElementById('checkout-container').style.display = 'flex';
            } catch (error) {
                console.error('Error:', error);
                alert('Failed to Initialize Payment Gateway. Please try again.');
            }
        });

        document.getElementById('close-button').addEventListener('click', () => {
          console.log("Close button clicked");
          document.getElementById('checkout-container').style.display = 'none';
        });
    </script>
</body>
</html>